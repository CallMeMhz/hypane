<div x-data="iframePanel()" x-init="init()" class="h-full w-full">
  <template x-if="url">
    <iframe :src="url" class="w-full h-full border-0 rounded" 
            sandbox="allow-scripts allow-same-origin allow-popups allow-forms"
            loading="lazy"></iframe>
  </template>
  <template x-if="!url">
    <div class="h-full flex items-center justify-center text-gray-500 text-sm">
      未配置网页地址
    </div>
  </template>
</div>

<script>
window.iframePanel = window.iframePanel || function() {
  return {
    url: '',
    panelId: '',
    
    async init() {
      this.panelId = this.$el.closest('[data-panel-id]').dataset.panelId;
      const res = await fetch('/api/panels/' + this.panelId + '/data');
      const data = await res.json();
      this.url = data.url || '';
    }
  };
};
</script>
